"use strict";window.App.Utils.Http=function(){return{request:function(method,url,data){return new Promise(function(resolve,reject){fetch(App.Utils.Url.siteUrl(url),{method:method,mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:data?JSON.stringify(data):void 0}).then(function(response){return response.ok||response.text().then(function(message){var error=new Error(message);throw error.status=response.status,error})["catch"](function(error){console.error(error),reject(error)}),response}).then(function(response){return response.json()}).then(function(json){resolve(json)})["catch"](function(error){console.error(error),reject(error)})})},upload:function(method,url,file){var formData=new FormData;return formData.append("file",file,file.name),new Promise(function(resolve,reject){fetch(App.Utils.Url.siteUrl(url),{method:method,redirect:"follow",referrer:"no-referrer",body:formData}).then(function(response){return response.ok||response.text().then(function(message){var error=new Error(message);throw error.status=response.status,error})["catch"](function(error){console.error(error),reject(error)}),response}).then(function(response){return response.json()}).then(function(json){resolve(json)})["catch"](function(error){console.error(error),reject(error)})})},download:function(method,url){return new Promise(function(resolve,reject){fetch(App.Utils.Url.siteUrl(url),{method:method,mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer"}).then(function(response){return response.ok||response.text().then(function(message){var error=new Error(message);throw error.status=response.status,error})["catch"](function(error){console.error(error),reject(error)}),response}).then(function(response){return response.arrayBuffer()}).then(function(json){resolve(json)})["catch"](function(error){console.error(error),reject(error)})})}}}();