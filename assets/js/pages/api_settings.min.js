"use strict";App.Pages.ApiSettings=function(){function isInvalid(){try{$("#api-settings .is-invalid").removeClass("is-invalid");var missingRequiredFields=!1;if($("#api-settings .required").each(function(index,requiredField){var $requiredField=$(requiredField);$requiredField.val()||($requiredField.addClass("is-invalid"),missingRequiredFields=!0)}),missingRequiredFields)throw new Error(lang("fields_are_required"));return!1}catch(error){return App.Layouts.Backend.displayNotification(error.message),!0}}function deserialize(apiSettings){apiSettings.forEach(function(apiSetting){var $field=$("[data-field=\""+apiSetting.name+"\"]");$field.is(":checkbox")?$field.prop("checked",!!+apiSetting.value):$field.val(apiSetting.value)})}function serialize(){var apiSettings=[];return $("[data-field]").each(function(index,field){var $field=$(field);apiSettings.push({name:$field.data("field"),value:$field.is(":checkbox")?+$field.prop("checked"):$field.val()})}),apiSettings}function onSaveSettingsClick(){if(isInvalid())return void App.Layouts.Backend.displayNotification(lang("settings_are_invalid"));var apiSettings=serialize();App.Http.ApiSettings.save(apiSettings).done(function(){App.Layouts.Backend.displayNotification(lang("settings_saved"))})}var $saveSettings=$("#save-settings");return document.addEventListener("DOMContentLoaded",function(){$saveSettings.on("click",onSaveSettingsClick);var apiSettings=vars("api_settings");deserialize(apiSettings)}),{}}();